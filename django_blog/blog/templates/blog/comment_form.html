{% extends 'blog/base.html' %}

{% block title %}{% if object %}Edit{% else %}New{% endif %} Comment{% endblock %}

{% block content %}
<h1>{% if object %}Edit{% else %}New{% endif %} Comment</h1>

{% if not object and not view.kwargs.post_id %}
    <div class="alert alert-warning">
        Please select a post to comment on.
        <a href="{% url 'posts-list' %}">View Posts</a>
    </div>
{% else %}
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        
        {% if not object %}
            <input type="hidden" name="post_id" value="{{ view.kwargs.post_id }}">
        {% endif %}
        
        <button type="submit">Save</button>
        
        {% if object %}
            <a href="{% url 'comment-detail' object.pk %}">Cancel</a>
        {% else %}
            <a href="{% url 'post-detail' view.kwargs.post_id %}">Cancel</a>
        {% endif %}
    </form>
{% endif %}
{% endblock %}